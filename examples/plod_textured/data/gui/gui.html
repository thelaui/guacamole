<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>gui</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" type="text/css" href="third_party/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="third_party/css/bootstrap-theme.css">
    <link rel="stylesheet" type="text/css" href="third_party/css/bootstrap-slider.css">
    <link rel="stylesheet" type="text/css" href="third_party/css/bootstrap.colorpickersliders.min.css">
    <link rel="stylesheet" type="text/css" href="third_party/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="third_party/css/bootstrap-select.min.css">
    <link href="gui.css" rel="stylesheet">

    <script type="text/javascript" src="third_party/js/jquery-1.10.2.js"></script>
    <script type="text/javascript" src="third_party/js/jquery-ui-1.10.4.min.js"></script>
    <script type="text/javascript" src="third_party/js/tinycolor.js"></script>
    <script type="text/javascript" src="third_party/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="third_party/js/bootstrap-slider.js"></script>
    <script type="text/javascript" src="third_party/js/bootstrap.colorpickersliders.min.js"></script>
    <script type="text/javascript" src="third_party/js/bootstrap-select.min.js"></script>


    <script type="text/javascript">

      function add_space(parent_selector, label) {
        $(parent_selector).append('<hr />');
      }

      function init_color_picker(parent_selector, func) {

        $(parent_selector + " ." + func).ColorPickerSliders({
          size: "sm",
          placement: "top",
          sliders: false,
          swatches: false,
          hsvpanel: true,
          onchange: function(container, color) {
            var colorPicker = $(parent_selector + " ." + func);
            var color_string = color.tiny.toRgbString();
            colorPicker.css("background-color", color_string);
            gua["set_" + func](color_string);
          }
        });

        return {func: func, selector: parent_selector + " ." + func};
      }

      function add_slider(parent_selector, func, label, min, max, step) {
        $(parent_selector).append(
          '<div class="row">' +
            '<div class="col-xs-5">' +
              label + ':' +
            '</div>' +
            '<div class="col-xs-7">' +
              '<input class="slider ' + func + '" data-slider-tooltip="hide" data-slider-id=' +
                func + ' type="text" data-slider-min="' +
                min + '" data-slider-max="' + max + '" data-slider-step="' +
                step + '" handle="custom"/>' +
            '</div>' +
          '</div>'
        );

        return init_slider(parent_selector + ' .' + func, func);
      }

      function init_slider(id, func) {

        var slider = $(id).slider();

        var obj = $(id);

        slider.swift_func = func;

        slider.on("slideStop", function() {
          var val = $(this).slider('getValue');
          $(this).parent().attr("val", parseFloat(val.toFixed(4)));
          gua["set_" + func](val);
        });

        slider.on("slide", function() {
          var val = $(this).slider('getValue');
          gua["set_" + func](val);
          $(this).parent().attr("val", parseFloat(val.toFixed(4)));
          obj.find(".slider-handle").focus();
        });

        obj.on("click", function(){
          obj.find(".slider-handle").focus();
        });

        var val = parseFloat(gua["get_" + func]());
        slider.slider('setValue', val);
        $(id).parent().attr("val", parseFloat(val.toFixed(4)));

        return slider;
      }

      function add_checkbox(parent_selector, func, label) {
        $(parent_selector).append(
          '<div class="row">' +
            '<div class="col-xs-5">' +
              label + ':' +
            '</div>' +
            '<div class="col-xs-7">' +
              '<div class="checkbox">' +
                '<label>' +
                  '<input id="' + func + '" type="checkbox" value="">' +
                  '<span></span>' +
                '</label>' +
              '</div>' +
            '</div>' +
          '</div>'
        );

        return init_checkbox("#" + func, func);
      }

      var init_checkbox = function(selector, func) {
        $(selector).change(function() {
          gua["set_" + func](this.checked ? 1 : 0);
        });
      }

      var init_radio = function(selector, func) {
        $(selector).change(function() {
          gua["set_" + func](this.checked ? 1 : 0);
        });
      }

      function init() {

        init_radio("#selection_mode_camera", "selection_mode_camera");
        init_radio("#selection_mode_fragment", "selection_mode_fragment");

        init_radio("#render_method_direct", "render_method_direct");
        init_radio("#render_method_blended", "render_method_blended");

        init_radio("#tool_none", "tool_none");
        init_radio("#tool_lens", "tool_lens");
        init_radio("#tool_measurement", "tool_measurement");
        init_radio("#tool_provenance", "tool_provenance");

        init_radio("#interpolation_none", "interpolation_none");
        init_radio("#interpolation_linear", "interpolation_linear");
        init_radio("#interpolation_nearest_neighbor", "interpolation_nearest_neighbor");

        init_checkbox("#enableTreeVis", "tree_vis_enable");
        init_checkbox("#enableFrustumVis", "frustum_vis_enable");
        init_checkbox("#enableShowOptimized", "show_optimized_enable");

        init_slider("#control-panel .query_radius", "query_radius");
        init_slider("#control-panel .splat_radius", "splat_radius");
        init_slider("#control-panel .blending_factor", "blending_factor");
        init_slider("#control-panel .blending_range", "blending_range");
        init_slider("#control-panel .clamping_radius", "clamping_radius");

        init_slider("#control-panel .interpolation_range", "interpolation_range");

        $("body").addClass("on");
      }


      $(document).ready(function() {

        $('#settings-right .side-panel').hover(function(){
          $('#settings-right .side-panel').removeClass("expanded");
          $(this).addClass("expanded");
        });
        $("body").addClass("on");

      });

    </script>

  </head>
  <body>

    <div id="settings-right">

      <div class="side-panel expanded">
        <div id="control-panel" class="panel-inner">

          <h4><i class="fa fa-cogs"></i> Options</h4>

          <h4 class="highlight">Texturing</h4>

          <div class="row">
            <div class="col-xs-5">
            Selection Mode:
            </div>
            <div class="col-xs-7">
              <div class="radio">
                <label>
                  <input type="radio" name="selectionModeRadios" id="selection_mode_camera" value="" checked>
                  <span>Closest to camera</span>
                </label>
              </div>
              <div class="radio">
                <label>
                  <input type="radio" name="selectionModeRadios" id="selection_mode_fragment" value="">
                  <span>Closest to fragment</span>
                </label>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-xs-5">
              Query Radius:
            </div>
            <div class="col-xs-7">
              <input class="slider query_radius" data-slider-tooltip="hide" data-slider-id="query_radius" type="text" data-slider-min="0" data-slider-max="100" data-slider-step="1" handle="custom"/>
            </div>
          </div>
          <div class="row">
            <div class="col-xs-5">
              Blending Factor:
            </div>
            <div class="col-xs-7">
              <input class="slider blending_factor" data-slider-tooltip="hide" data-slider-id="blending_factor" type="text" data-slider-min="0" data-slider-max="1" data-slider-step="0.1" handle="custom"/>
            </div>
          </div>
          <div class="row">
            <div class="col-xs-5">
              Blending Range:
            </div>
            <div class="col-xs-7">
              <input class="slider blending_range" data-slider-tooltip="hide" data-slider-id="blending_factor" type="text" data-slider-min="0" data-slider-max="5" data-slider-step="1" handle="custom"/>
            </div>
          </div>

          <h4 class="highlight">Point Clouds</h4>

          <div class="row">
            <div class="col-xs-5">
            Render Method:
            </div>
            <div class="col-xs-7">
              <div class="radio">
                <label>
                  <input type="radio" name="renderMethodRadios" id="render_method_direct" value="" checked>
                  <span>Direct</span>
                </label>
              </div>
              <div class="radio">
                <label>
                  <input type="radio" name="renderMethodRadios" id="render_method_blended" value="">
                  <span>Blended</span>
                </label>
              </div>
            </div>

            <div class="col-xs-5">
            Clamping Radius:
            </div>
            <div class="col-xs-7">
              <input class="slider clamping_radius" data-slider-tooltip="hide" data-slider-id="clamping_radius" type="text" data-slider-min="0" data-slider-max="1" data-slider-step="0.01" handle="custom"/>
            </div>

            <div class="col-xs-5">
            Splat Radius:
            </div>
            <div class="col-xs-7">
              <input class="slider splat_radius" data-slider-tooltip="hide" data-slider-id="splat_radius" type="text" data-slider-min="0.1" data-slider-max="2.0" data-slider-step="0.1" handle="custom"/>
            </div>
          </div>

          <h4 class="highlight">Tools</h4>

          <div class="row">
            <div class="col-xs-5">
            Selected Tool:
            </div>
            <div class="col-xs-7">
              <div class="radio">
                <label>
                  <input type="radio" name="toolRadios" id="tool_none" value="" checked>
                  <span>None</span>
                </label>
              </div>
              <div class="radio">
                <label>
                  <input type="radio" name="toolRadios" id="tool_lens" value="">
                  <span>Lens</span>
                </label>
              </div>
              <div class="radio">
                <label>
                  <input type="radio" name="toolRadios" id="tool_measurement" value="">
                  <span>Measurement</span>
                </label>
              </div>
              <div class="radio">
                <label>
                  <input type="radio" name="toolRadios" id="tool_provenance" value="">
                  <span>Provenance</span>
                </label>
              </div>
            </div>
          </div>

          <h4 class="highlight">Debug</h4>

          <div class="row">
            <div class="col-xs-5">
            Draw Tree:
            </div>
            <div class="col-xs-7">
              <div class="checkbox">
                <label>
                  <input id="enableTreeVis" type="checkbox" value="">
                  <span>Enabled</span>
                </label>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-xs-5">
            Draw Frusta:
            </div>
            <div class="col-xs-7">
              <div class="checkbox">
                <label>
                  <input id="enableFrustumVis" type="checkbox" value="">
                  <span>Enabled</span>
                </label>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-xs-5">
            Show Optimized:
            </div>
            <div class="col-xs-7">
              <div class="checkbox">
                <label>
                  <input id="enableShowOptimized" type="checkbox" value="">
                  <span>Enabled</span>
                </label>
              </div>
            </div>
          </div>

          <h4 class="highlight">Interpolation</h4>

          <div class="row">
            <div class="col-xs-5">
              Mode:
            </div>
            <div class="col-xs-7">
              <div class="radio">
                <label>
                  <input type="radio" name="interpolationRadios" id="interpolation_none" value="" checked>
                  <span>None</span>
                </label>
              </div>
              <div class="radio">
                <label>
                  <input type="radio" name="interpolationRadios" id="interpolation_linear" value="">
                  <span>Linear</span>
                </label>
              </div>
              <div class="radio">
                <label>
                  <input type="radio" name="interpolationRadios" id="interpolation_nearest_neighbor" value="">
                  <span>Nearest Neighbor</span>
                </label>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-xs-5">
              Range:
            </div>
            <div class="col-xs-7">
              <input class="slider interpolation_range" data-slider-tooltip="hide" data-slider-id="interpolation_range" type="text" data-slider-min="0" data-slider-max="100.0" data-slider-step="1.0" handle="custom"/>
            </div>
          </div>

        </div>
      </div>

    </div>

  </body>
</html>
